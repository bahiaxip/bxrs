<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="dismiss()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
      <!--<ion-back-button
      defaultHref="tab1"
      >
      </ion-back-button>-->
    </ion-buttons>
    <ion-title class="title" *ngIf="!switchUpdate">NUEVA PUBLICACIÓN</ion-title>
    <ion-title class="title" *ngIf="switchUpdate">EDITANDO PUBLICACIÓN</ion-title>
    <!--<ion-buttons slot="end">
      <a [routerLink]="['/add']">
        <ion-icon name="pencil-outline" style="float:right"></ion-icon>
      </a>
    </ion-buttons>-->
  </ion-toolbar>
</ion-header>


<ion-card>
  <ion-card-header>

    <ion-card-title>
      Publicaciones {{datoId}}
    </ion-card-title>
    <ion-card-content>
      <div>
      <form [formGroup] ="formAddPublication" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
        <mat-form-field style="width:100%">
          <mat-label>Comparte tu idea</mat-label>
          <textarea matInput [placeholder]="data" rows="5" cols="10" name="text" formControlName="text">
          </textarea>

          <mat-hint *ngIf="!formAddPublication.controls.text.value &&
          formAddPublication.controls.text.touched;else hint" style="color:red">Debe introducir un texto</mat-hint>
          <ng-template #hint>
            <mat-hint>Publicación</mat-hint>
          </ng-template>
        </mat-form-field>
        <ion-row>
          <ion-col>
            <button mat-raised-button color="primary" type="button" (click)="updatePublication()" [disabled]="!formAddPublication.valid" *ngIf="switchUpdate">Actualizar</button>

            <button mat-raised-button color="primary" type="submit" [disabled]="!formAddPublication.valid" *ngIf="!switchUpdate">Enviar</button>
          </ion-col>
          <ion-col>
            <ion-button (click)="fileButton.click()"  style="position:absolute;bottom:10px;right:10px;">
              <ion-icon name="image"></ion-icon>
            </ion-button>
            <input name="imagepub" #fileButton type="file" (change)="fileChangeEvent($event)"  style="width: 0;height:"/>
          </ion-col>
        </ion-row>
      </form>
    </div>
    </ion-card-content>
  </ion-card-header>
</ion-card>
