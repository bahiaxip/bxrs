<ion-header [translucent]="true">
  <ion-toolbar color="favorite">
    <ion-buttons slot="start">
      <ion-button (click)="dismiss()">
        <ion-icon name="arrow-back" class="c_white"></ion-icon>
      </ion-button>
      <!--<ion-back-button
      defaultHref="tab1"
      >
      </ion-back-button>-->
    </ion-buttons>
    <ion-title class="title2" *ngIf="!switchUpdate">NUEVA PUBLICACIÓN</ion-title>
    <ion-title class="title2" *ngIf="switchUpdate">EDITANDO PUBLICACIÓN</ion-title>
    <!--<ion-buttons slot="end">
      <a [routerLink]="['/add']">
        <ion-icon name="pencil-outline" style="float:right"></ion-icon>
      </a>
    </ion-buttons>-->
  </ion-toolbar>
</ion-header>

<ion-content color="dark">
  <!-- arriba -->
  <!--<ion-card >-->
    <!--abajo-->
<ion-card class="add_pub_card">
  <ion-card-header>
    <ion-card-title class="title">
      Comparte tu idea
    </ion-card-title>
    <ion-card-content>
      <div>
      <form [formGroup] ="formAddPublication" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
        <mat-form-field class="w100">
          <mat-label>Escribir aquí</mat-label>
          <textarea matInput [placeholder]="data" rows="5" cols="10" name="text" formControlName="text">
          </textarea>

          <mat-hint *ngIf="!formAddPublication.controls.text.value &&
          formAddPublication.controls.text.touched;else hint" style="color:red">Debe introducir un texto</mat-hint>
          <ng-template #hint>
            <mat-hint>Publicación</mat-hint>
          </ng-template>
        </mat-form-field>
        <ion-row>
          <ion-col size="4">
            <button mat-raised-button class="favorite_button"  type="button" (click)="updatePublication()" [disabled]="!formAddPublication.valid" *ngIf="switchUpdate">
              ACTUALIZAR
            </button>

            <button mat-raised-button class="favorite_button" type="submit" [disabled]="!formAddPublication.valid" *ngIf="!switchUpdate">
              ENVIAR
            </button>
          </ion-col>
          <ion-col size="4">
            <ion-button (click)="fileButton.click()" color="favorite">
              <ion-icon name="image" class="c_white"></ion-icon>
            </ion-button>
            <input name="imagepub" #fileButton type="file" (change)="fileChangeEvent($event)"  class="input_hidden"/>
          </ion-col>
          <ion-col *ngIf="switchUpdate && publicationUser.image && publicationUser.image.name" size="4">
            <ion-thumbnail class="floatR">
              <img src="{{url+'image-pub/'+publicationUser.user.email+'/'+publicationUser.image.name}}" />
            </ion-thumbnail>
          </ion-col>
        </ion-row>
      </form>
    </div>
    </ion-card-content>
  </ion-card-header>
</ion-card>
</ion-content>
